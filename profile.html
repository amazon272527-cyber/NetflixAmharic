<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netflix Amharic - Profile Settings</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* á‹­áˆ… áŠ®á‹µ áŠ¥áˆ­áˆµá‹ á‹¨áˆ°áŒ¡á‰µ áˆ²áˆ†áŠ•á£ á‰ á‹‹áŠ“á‹ style.css áˆ‹á‹­ áˆˆá‹šáˆ… áŒˆáŒ½ á‰¥á‰» á‰°á‹°áˆ«á‰¢ áŠ¥áŠ•á‹²áˆ†áŠ• á‹«áŒˆáˆˆáŒáˆ‹áˆ */
        body {
            display: flex;
            background-image: none;
            background-color: #1a1a1a;
            min-height: 100vh;
            padding: 0;
            margin: 0;
            font-family: 'Poppins', sans-serif;
        }
        
        .main-content {
            padding: 30px;
            flex-grow: 1;
            max-width: 1000px;
            width: 100%;
        }
        
        .settings-header {
            margin-bottom: 40px;
            border-bottom: 1px solid #333;
            padding-bottom: 15px;
        }
        
        .settings-header h1 {
            font-size: 28px;
            color: #ff4081;
        }
    </style>
</head>
<body>
    
    <aside class="sidebar">
        <div class="logo-mini">NA</div>
        <button class="sidebar-toggle"><span class="material-icons">menu</span></button>
        <nav class="sidebar-nav">
            <a href="index.html" class="nav-item"><span class="material-icons">home</span><span class="sidebar-text">áˆ˜áŠáˆ»</span></a>
            <a href="#" class="nav-item"><span class="material-icons">trending_up</span><span class="sidebar-text">á‰ áŒ£áˆ á‹¨á‰³á‹©</span></a>
            <a href="#" class="nav-item"><span class="material-icons">movie</span><span class="sidebar-text">áŠáˆáˆá‰½</span></a>
            <a href="#" class="nav-item"><span class="material-icons">live_tv</span><span class="sidebar-text">á‰°áŠ¨á‰³á‰³á‹­</span></a>
            <a href="#" class="nav-item"><span class="material-icons">bookmarks</span><span class="sidebar-text">á‹¨áŠ” á‹áˆ­á‹áˆ­</span></a>
            <a href="profile.html" class="nav-item active bottom"><span class="material-icons">settings</span><span class="sidebar-text">á‰…áŠ•á‰¥áˆ®á‰½</span></a>
        </nav>
    </aside>

    <main class="main-content">
        <header class="top-header">
            <div class="search-bar">
                <span class="material-icons">search</span>
                <input type="text" placeholder="áˆáˆáŒ..." />
            </div>

            <div class="language-selector">
                <select id="language-switch">
                    <option value="am">áŠ áˆ›áˆ­áŠ›</option>
                    <option value="en">English</option>
                </select>
            </div>
            
            <div class="user-actions" id="user-actions-container">
                </div>
        </header>

        <div class="settings-header">
            <h1>User Profile Settings</h1>
        </div>

        <form class="profile-settings-form">
            
            <div class="setting-group profile-picture-group">
                <h3>Profile Picture</h3>
                <img src="profile_avatar.jpg" alt="Current Profile Image" class="current-profile-img">
                <input type="file" id="profile-upload" accept="image/*">
                <label for="profile-upload" class="upload-btn">áˆáˆµáˆ á‹­á‰€á‹­áˆ©</label>
            </div>

            <div class="setting-group info-group">
                <h3>Personal Information</h3>
                <div class="input-group">
                    <label for="username">User Name</label>
                    <input type="text" id="username" value="áŠ áˆµá‹‹ (Aswa)" required>
                </div>
                <div class="input-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" value="aswa@example.com" readonly> 
                </div>
            </div>

            <div class="setting-group password-group">
                <h3>Password</h3>
                <div class="input-group">
                    <label for="current-password">Current Password</label>
                    <input type="password" id="current-password" placeholder="áŠ áˆáŠ• á‹«áˆˆá‹áŠ• á‹¨á‹­áˆˆá á‰ƒáˆ á‹«áˆµáŒˆá‰¡">
                </div>
                <div class="input-group">
                    <label for="new-password">New Password</label>
                    <input type="password" id="new-password" placeholder="áŠ á‹²áˆµ á‹¨á‹­áˆˆá á‰ƒáˆ">
                </div>
                <div class="input-group">
                    <label for="confirm-new-password">Confirm New Password</label>
                    <input type="password" id="confirm-new-password" placeholder="áŠ á‹²áˆ±áŠ• á‹¨á‹­áˆˆá á‰ƒáˆ á‹«áˆ¨áŒ‹áŒáŒ¡">
                </div>
            </div>

            <button type="submit" class="save-changes-btn">Changes Save (áˆˆá‹áŒ¦á‰½áŠ• áŠ áˆµá‰€áˆáŒ¥)</button>
            <button type="button" class="logout-btn">Log Out (á‹áŒ£)</button>
        </form>
    </main>
    
    <div class="cookie-bar" id="cookie-consent-bar">
        <p>á‹­áˆ… á‹µáˆ¨-áŒˆáŒ½ á‹¨áŠ áŒˆáˆáŒáˆá‰µ áŒ¥áˆ«á‰µ áˆˆáˆ›áˆ»áˆ»áˆ áŠ©áŠªá‹á‰½áŠ• á‹­áŒ á‰€áˆ›áˆá¢
            <a href="#" class="cookie-link">á‰°áŒ¨áˆ›áˆª á‹«áŠ•á‰¥á‰¡</a>
        </p>
        <button class="cookie-dismiss-btn" id="accept-cookies">áŠ¥á‰€á‰ áˆ‹áˆˆáˆ</button>
    </div>

    <script>
        const profileUploadInput = document.getElementById('profile-upload');
        const currentProfileImg = document.querySelector('.current-profile-img');
        const settingsForm = document.querySelector('.profile-settings-form');
        const usernameInput = document.getElementById('username');
        const logoutButton = document.querySelector('.logout-btn');
        const userActionsContainer = document.getElementById('user-actions-container');

        let newProfileImageBase64 = null;


        // áŒˆáŒ¹ áˆ²áŒ«áŠ• á‹¨á‰°á‰€áˆ˜áŒ¡ áˆ˜áˆ¨áŒƒá‹á‰½áŠ• (áˆµáˆá£ áˆáˆµáˆ áŠ¥áŠ“ á‰‹áŠ•á‰‹) áŠ¨Local Storage áˆ›áˆ³á‹¨á‰µ
        document.addEventListener('DOMContentLoaded', () => {
            const storedUsername = localStorage.getItem('currentUser');
            const storedImageBase64 = localStorage.getItem('userProfileImage');
            
            // 1. á‰‹áŠ•á‰‹ áˆ˜á‰†áŒ£áŒ áˆ­
            const langSwitch = document.getElementById('language-switch');
            const storedLang = localStorage.getItem('appLanguage') || 'am'; // áŠá‰£áˆª áŠ áˆ›áˆ­áŠ›
            
            if (langSwitch) {
                langSwitch.value = storedLang;
                
                langSwitch.addEventListener('change', (event) => {
                    localStorage.setItem('appLanguage', event.target.value);
                    alert(`á‰‹áŠ•á‰‹ á‹ˆá‹° "${event.target.options[event.target.selectedIndex].text}" á‰°á‰€á‹­áˆ¯áˆá¢`);
                });
            }

            // 2. á‹¨áˆ‹á‹­áŠ›á‹ áŠ áˆáˆŒáŠ• áˆ›áˆµá‰°áŠ«áŠ¨áˆ (User Actions)
            if (storedUsername) {
                // á‰°áŒ á‰ƒáˆšá‹ áŠ¨áŒˆá‰£
                userActionsContainer.innerHTML = `
                    <span class="material-icons notification">notifications</span> 
                    <span class="user-name-display">${storedUsername}</span> 
                    <a href="profile.html"><img src="${storedImageBase64 || 'profile_avatar.jpg'}" alt="Profile Image" class="profile-avatar-img"></a>
                `;
                usernameInput.value = storedUsername;
            } else {
                 // á‰°áŒ á‰ƒáˆšá‹ áŠ«áˆáŒˆá‰£
                userActionsContainer.innerHTML = `
                    <a href="signin.html" class="signup-link">á‹­áŒá‰¡ (Sign In)</a>
                `;
                // á‰°áŒ á‰ƒáˆšá‹ áŠ«áˆáŒˆá‰£ á‹ˆá‹° á‹‹áŠ“á‹ áŒˆáŒ½ áˆ˜áˆ‹áŠ­ (áŠ áˆ›áˆ«áŒ­)
                // window.location.href = 'index.html';
            }

            // 3. áˆáˆµáˆ áŠ«áˆˆ áˆ›áˆ³á‹¨á‰µ
            if (storedImageBase64) {
                currentProfileImg.src = storedImageBase64;
            }

            // 4. SIDEBAR TOGGLE á‰°áŒá‰£áˆ­
            const sidebar = document.querySelector('.sidebar');
            const mainContent = document.querySelector('.main-content');
            const sidebarToggle = document.querySelector('.sidebar-toggle');

            if (sidebarToggle) {
                sidebarToggle.addEventListener('click', () => {
                    sidebar.classList.toggle('is-open');
                    mainContent.classList.toggle('is-open');
                    
                    const icon = sidebarToggle.querySelector('.material-icons');
                    if (sidebar.classList.contains('is-open')) {
                        icon.textContent = 'close';
                    } else {
                        icon.textContent = 'menu';
                    }
                });
            }
            
            // 5. ğŸŸ¢ áŠ á‹²áˆµ á‹¨á‰°áŒ¨áˆ˜áˆ¨: á‹¨áŠ©áŠª áˆ›áˆµáŒ áŠ•á‰€á‰‚á‹« á‰°áŒá‰£áˆ­
            const cookieBar = document.getElementById('cookie-consent-bar');
            const acceptButton = document.getElementById('accept-cookies');
            const cookieAccepted = localStorage.getItem('cookieConsent');

            // áŠ©áŠªá‹ áŠ«áˆá‰°á‰€á‰ áˆˆ áˆ›áˆ³á‹«á‹áŠ• áŠ áˆ³á‹­
            if (!cookieAccepted && cookieBar) {
                cookieBar.style.display = 'flex';
            } else if (cookieBar) {
                 // áŠ¨á‰°á‰€á‰ áˆˆ á‹°á‰¥á‰…
                cookieBar.style.display = 'none';
            }

            if (acceptButton) {
                acceptButton.addEventListener('click', () => {
                    localStorage.setItem('cookieConsent', 'accepted');
                    if (cookieBar) {
                        cookieBar.style.display = 'none';
                    }
                });
            }
        });


        // á‹¨áˆáˆµáˆ á‰…á‹µáˆ˜ áŠ¥á‹­á‰³ (Image Preview) áŠ¥áŠ“ Base64 áˆ˜á‹«á‹
        profileUploadInput.addEventListener('change', function(event) {
            if (event.target.files && event.target.files[0]) {
                const reader = new FileReader();

                reader.onload = function(e) {
                    currentProfileImg.src = e.target.result;
                    newProfileImageBase64 = e.target.result; 
                }
                
                reader.readAsDataURL(event.target.files[0]);
                alert('âœ… áˆáˆµáˆá‹ áˆˆáŒŠá‹œá‹«á‹Š áˆ›áˆ³á‹« á‰°á‰€á‹­áˆ¯áˆá¢ Changes Save áˆ²áŒ«áŠ‘ á‰ áŠ áˆ³áˆ½á‹ á‹­á‰€áˆ˜áŒ£áˆá¢');
            }
        });
        
        
        // á‹¨á‰…áŠ•á‰¥áˆ®á‰½ á‰…áŒ½ áˆ²áˆ‹áŠ­ (Save Changes áˆ²áŒ«áŠ‘) - áŠ á‹²áˆµ áˆµáˆ áŠ¥áŠ“ áˆáˆµáˆ áˆ›áˆµá‰€áˆ˜áŒ¥
        settingsForm.addEventListener('submit', function(event) {
            event.preventDefault(); 
            
            const newUsername = usernameInput.value;
            
            // 1. á‹¨á‹©á‹˜áˆ­ áˆµáˆ áˆ›áˆµá‰€áˆ˜áŒ¥
            localStorage.setItem('currentUser', newUsername);

            // 2. áŠ á‹²áˆµ áˆáˆµáˆ áŠ¨á‰°áˆ˜áˆ¨áŒ á£ á‰ Local Storage áˆ‹á‹­ áˆ›áˆµá‰€áˆ˜áŒ¥
            if (newProfileImageBase64) {
                 localStorage.setItem('userProfileImage', newProfileImageBase64);
            }
            
            alert(`ğŸ‰ ${newUsername}á¢ áˆˆá‹áŒ¦á‰½á‹ á‰°á‰€áˆáŒ á‹‹áˆ! á‹ˆá‹° á‹‹áŠ“á‹ áŒˆáŒ½ áŠ¥á‹¨á‰°áˆ˜áˆˆáˆ± áŠá‹á¢`);
            
            window.location.href = 'index.html';
        });

        // Log Out á‰°áŒá‰£áˆ­
        if (logoutButton) {
            logoutButton.addEventListener('click', function() {
                // á‹¨á‰°á‰€áˆ˜áŒ á‹áŠ• áˆµáˆ áŠ¥áŠ“ áˆáˆµáˆ áŠ¨Local Storage áˆ›áŒ¥á‹á‰µ
                localStorage.removeItem('currentUser');
                localStorage.removeItem('userProfileImage');
                
                alert('Goodbye! á‰ á‰°áˆ³áŠ« áˆáŠ”á‰³ á‹ˆáŒ¥á‰°á‹‹áˆá¢ á‹ˆá‹° á‹‹áŠ“á‹ áŒˆáŒ½ áŠ¥á‹¨á‰°áˆ˜áˆˆáˆ± áŠá‹ (áŠ¨áŠá‰£áˆª áˆ˜áˆ¨áŒƒ áŒ‹áˆ­)');
                
                // á‹ˆá‹° index.html á‰ áˆ˜áˆ˜áˆˆáˆµ áŠá‰£áˆªá‹áŠ• (default) áˆ˜áˆ¨áŒƒ áŠ¥áŠ•á‹²áŒ­áŠ• áˆ›á‹µáˆ¨áŒ
                window.location.href = 'index.html'; 
            });
        }
    </script>
</body>
</html>